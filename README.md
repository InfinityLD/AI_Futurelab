# AI_Futurelab
赛题链接: [城市-房产租金预测](https://ai.futurelab.tv/contest_detail/3)

赛题主要是通过房产市场、租赁市场、市场需求以及房屋配置，做出合理的房租预测。
数据集中数据类别包括租赁房源、小区情况、所在版块二手房、新房以及土地等营销情况，结合人口、客户、真实租金等。

评分公式为:   
![CodeCogsEqn.png](https://i.loli.net/2019/05/23/5ce681108b99694252.png)


## 解题思路
1. 数据集样本数量较少 (约40k+样本)
2. 数据集特征包含类别特征和数值型特征，特征维度丰富
3. 数据集中包含直接缺失值的特征不多 (如 pv, uv)，但包含隐含缺失值的特征较多 (如 rentType, houseToward 等)
4. 数据集中包含非常多的异常点、离群点


**该赛题数据清洗的程度能很大程度影响模型的分数，保持训练集和测试集的特征分布基本相同，使模型的线下分数与线上统一**
\
数据清洗策略：
+ 选择 500 <= train['tradeMoney'] <= 25000
+ 选择 5 <= train['area'] <= 200
+ 选择 1 <= train['totalFloor'] <= 60

**构建业务特征，依据原则如下：**
+ 以每平方米月租金作为评价标准
+ 房龄越老房租越贵，房屋面积越小越贵
+ 岗位密集区租金更高
+ 附近上班族越多，租金越贵
+ 地铁相比公交，对多数需要远距离通勤的租客来说使首要考虑的交通工具，对房租的影响更为显著

**由于模型对样本预测偏差过大的问题，引入MAE, MSE分别作为损失函数，MAE用于准确预测中间值，MSE用于预测偏离值减少误差。本项目中使用了自定义损失函数代替MAE，MSE进行训练，但原理与其相同**

由于数据量较少且特征尺度较大，使用提升树模型进行实验，本次采用 lightgbm 10折交叉验证模型进行训练和预测

**最后将MAE，MSE的预测结果放入dataframe中，取中位数作为最终预测值，相比取均值，能有效缓解单个样本的多个预测值中分布偏移离群点带来的影响，能获得更高的分数**

线下MAE_CV 0.9375，MSE_CV 0.9375，线上a榜 0.9080 b榜 0.9102
